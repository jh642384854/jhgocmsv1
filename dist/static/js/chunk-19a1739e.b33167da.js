(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19a1739e"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),Math.easeInOutQuad=function(t,e,a,r){return t/=r/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,a){var s=i(),l=t-s,n=20,u=0;e="undefined"===typeof e?500:e;var c=function t(){u+=n;var i=Math.easeInOutQuad(u,s,l,e);o(i),u<e?r(t):a&&"function"===typeof a&&a()};c()}},1439:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item mr10",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleCreate()}}},[t._v("创建")]),t._v(" "),a("el-button",{staticClass:"filter-item mr10",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.batchDelete()}}},[t._v("删除")])],1),t._v(" "),a("vxe-table",{ref:"xTable",attrs:{size:t.GLOBAL.VxeTableSize,data:t.tableData,loading:t.listLoading,"row-class-name":t.tableRowClassName},on:{"update:data":function(e){t.tableData=e}}},[a("vxe-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("vxe-table-column",{attrs:{type:"index",width:"60"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"name",title:"链接名称"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"type",title:"链接类型",formatter:t.formatterType}}),t._v(" "),a("vxe-table-column",{attrs:{field:"status",title:"状态",formatter:t.formatterStatus,width:"80"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"list_order",title:"排序",width:"80"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"link_url",title:"链接地址","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:e.row.link_url,target:"_blank",type:"primary"}},[t._v(t._s(e.row.link_url))])]}}])}),t._v(" "),a("vxe-table-column",{attrs:{field:"contact_user",title:"站点联系人"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"description",title:"描述","show-overflow":""}}),t._v(" "),a("vxe-table-column",{attrs:{field:"created_at",title:"创建时间"}}),t._v(" "),a("vxe-table-column",{attrs:{title:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{size:"mini",type:"success"}},[a("span",{on:{click:function(e){return t.handleEdit(r.id,r)}}},[t._v("编辑")])]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(r)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:" total>0 "}],attrs:{total:t.total},on:{pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.postForm,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"链接名称",prop:"name"}},[a("el-input",{model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"链接类型",prop:"type"}},[a("el-radio-group",{model:{value:t.postForm.type,callback:function(e){t.$set(t.postForm,"type",e)},expression:"postForm.type"}},[a("el-radio",{attrs:{label:2}},[t._v("图片链接")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("文字链接")])],1)],1),t._v(" "),2==t.postForm.type?a("el-form-item",{attrs:{label:"链接LOGO",prop:"img_url"}},[a("el-upload",{ref:"upload",staticClass:"thumb-uploader",attrs:{accept:t.GLOBAL.AllowImageSuffix,action:t.GLOBAL.UploadAttachmentUrl,"list-type":"picture","auto-upload":!1,"show-file-list":!1,"on-success":t.handleThumbSuccess,"on-change":t.imgPreview}},[t.postForm.img_url?a("img",{staticClass:"thumb",attrs:{src:t.postForm.img_url}}):a("i",{staticClass:"el-icon-plus thumb-uploader-icon"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.GLOBAL.ImageUploadTips))])])],1):t._e(),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"排序",prop:"list_order"}},[a("el-input-number",{attrs:{min:1,max:100},model:{value:t.postForm.list_order,callback:function(e){t.$set(t.postForm,"list_order",e)},expression:"postForm.list_order"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:t.postForm.status,callback:function(e){t.$set(t.postForm,"status",e)},expression:"postForm.status"}},[a("el-radio",{attrs:{label:1}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("禁用")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"链接地址",prop:"link_url"}},[a("el-input",{model:{value:t.postForm.link_url,callback:function(e){t.$set(t.postForm,"link_url",t._n(e))},expression:"postForm.link_url"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"站点联系人",prop:"contact_user"}},[a("el-input",{model:{value:t.postForm.contact_user,callback:function(e){t.$set(t.postForm,"contact_user",e)},expression:"postForm.contact_user"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{model:{value:t.postForm.description,callback:function(e){t.$set(t.postForm,"description",e)},expression:"postForm.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n        "+t._s(t.textMap[t.dialogStatus])+"\n      ")])],1)],1)],1)},o=[],i=(a("ac4d"),a("8a81"),a("ac6a"),a("b775"));function s(t){return Object(i["a"])({url:"admin/links/list",method:"get",params:t})}function l(t){return Object(i["a"])({url:"admin/links/delete",method:"post",data:t})}function n(t){return Object(i["a"])({url:"admin/links/create",method:"post",data:t})}function u(t){return Object(i["a"])({url:"admin/links/update",method:"post",data:t})}var c=a("333d"),d={name:"links",components:{Pagination:c["a"]},filters:{},beforeCreate:function(){this},data:function(){return{hasSelectFileUpload:!1,listLoading:!0,total:0,tableData:[],sorts:[],dialogStatus:"",dialogFormVisible:!1,textMap:{update:"修改",create:"创建"},postForm:{name:"",type:1,img_url:"",contact_user:"",list_order:"",link_url:"",description:"",status:1,created_at:""},rules:{name:[{required:!0,message:"链接名称必须填写",trigger:"blur"}],type:[{required:!0,message:"链接类型必须选择",trigger:"blur"}],link_url:[{required:!0,type:"url",message:"链接链接必须填写",trigger:"blur"}],img_url:[{required:!0,message:"链接图片必须上传",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,s().then(function(e){t.tableData=e.data.items,t.total=e.data.total,t.listLoading=!1})},imgPreview:function(t,e){this.GLOBAL.uploadImageCheck(t,e)&&(this.hasSelectFileUpload=!0,this.postForm.img_url=t.url)},handleThumbSuccess:function(t,e,a){if(t.data.status!=this.GLOBAL.SuccessText)return this.GLOBAL.msgNotify("error","失败",t.data.msg),!1;this.postForm.upload_img_url=t.data.attachment.upload_file_path},formatterType:function(t){var e=t.cellValue;t.row,t.rowIndex,t.column,t.columnIndex;return 1===e?"文字链接":2===e?"图片链接":""},formatterStatus:function(t){var e=t.cellValue;t.row,t.rowIndex,t.column,t.columnIndex;return 1===e?"正常":0===e?"禁用":""},tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.status?"":"warning-row"},resetTemp:function(){this.hasSelectFileUpload=!1,this.postForm={name:"",type:1,img_url:"",contact_user:"",list_order:"",link_url:"",description:"",status:1,created_at:""}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&(t.hasSelectFileUpload&&t.$refs.upload.submit(),n(t.postForm).then(function(e){e.data.status==t.GLOBAL.SuccessText?(""!=t.postForm.upload_img_url&&(t.postForm.img_url=t.postForm.upload_img_url),t.postForm.id=e.data.last_id,t.postForm.created_at=e.data.created_at,t.tableData.unshift(t.postForm),t.dialogFormVisible=!1,t.GLOBAL.msgNotify("success","成功",e.data.msg)):t.GLOBAL.msgNotify("error","失败",e.data.msg)}))})},handleEdit:function(t,e){var a=this;this.resetTemp(),this.postForm=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){a.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(e){t.hasSelectFileUpload&&t.$refs.upload.submit();var a=Object.assign({},t.postForm);u(a).then(function(e){if(e.data.status==t.GLOBAL.SuccessText){"undefined"!=typeof t.postForm.upload_img_url&&(t.postForm.img_url=t.postForm.upload_img_url);var a=!0,r=!1,o=void 0;try{for(var i,s=t.tableData[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var l=i.value;if(l.id===t.postForm.id){var n=t.tableData.indexOf(l);t.tableData.splice(n,1,t.postForm);break}}}catch(u){r=!0,o=u}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}t.dialogFormVisible=!1,t.GLOBAL.msgNotify("success","成功",e.data.msg)}else t.GLOBAL.msgNotify("error","失败",e.data.msg)})}})},batchDelete:function(){var t=this,e=this.$refs.xTable.getSelectRecords();if(e.length){var a=[];for(var r in e)a.push(e[r].id);var o={ids:a};l(o).then(function(e){e.data.status==t.GLOBAL.SuccessText?(t.GLOBAL.msgNotify("success","成功",e.data.msg),t.$refs.xTable.removeSelecteds()):t.GLOBAL.msgNotify("error","失败",e.data.msg)})}else this.$alert("请至少选择一条数据！")},handleDelete:function(t){var e=this;this.$confirm("确定要删除该记录吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"放弃"}).then(function(){var a={ids:t.id};l(a).then(function(a){if(a.data.status==e.GLOBAL.SuccessText){e.GLOBAL.msgNotify("success","成功",a.data.msg);var r=e.tableData.indexOf(t);e.tableData.splice(r,1)}else e.GLOBAL.msgNotify("error","失败",a.data.msg)})}).catch(function(t){e.$message({type:"info",message:"cancel"===t?"放弃操作并离开页面":"停留在当前页面"})})}}},m=d,p=(a("cf35"),a("2877")),f=Object(p["a"])(m,r,o,!1,null,null,null);e["default"]=f.exports},"545e":function(t,e,a){},aa77:function(t,e,a){var r=a("5ca1"),o=a("be13"),i=a("79e5"),s=a("fdef"),l="["+s+"]",n="​",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(t,e,a){var o={},l=i(function(){return!!s[t]()||n[t]()!=n}),u=o[t]=l?e(m):s[t];a&&(o[a]=u),r(r.P+r.F*l,"String",o)},m=d.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},c5f6:function(t,e,a){"use strict";var r=a("7726"),o=a("69a8"),i=a("2d95"),s=a("5dbc"),l=a("6a99"),n=a("79e5"),u=a("9093").f,c=a("11e9").f,d=a("86cc").f,m=a("aa77").trim,p="Number",f=r[p],v=f,_=f.prototype,b=i(a("2aeb")(_))==p,g="trim"in String.prototype,h=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():m(e,3);var a,r,o,i=e.charCodeAt(0);if(43===i||45===i){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var s,n=e.slice(2),u=0,c=n.length;u<c;u++)if(s=n.charCodeAt(u),s<48||s>o)return NaN;return parseInt(n,r)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(b?n(function(){_.valueOf.call(a)}):i(a)!=p)?s(new v(h(e)),a,f):h(e)};for(var F,x=a("9e1e")?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;x.length>y;y++)o(v,F=x[y])&&!o(f,F)&&d(f,F,c(v,F));f.prototype=_,_.constructor=f,a("2aba")(r,p,f)}},cf35:function(t,e,a){"use strict";var r=a("545e"),o=a.n(r);o.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);