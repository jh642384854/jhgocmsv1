(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3642b252"],{"0c6f":function(t,e,r){"use strict";var a=r("32b7"),s=r.n(a);s.a},"32b7":function(t,e,r){},"456d":function(t,e,r){var a=r("4bf8"),s=r("0d58");r("5eda")("keys",function(){return function(t){return s(a(t))}})},"5eda":function(t,e,r){var a=r("5ca1"),s=r("8378"),i=r("79e5");t.exports=function(t,e){var r=(s.Object||{})[t]||Object[t],o={};o[t]=e(r),a(a.S+a.F*i(function(){r(1)}),"Object",o)}},"66da":function(t,e,r){"use strict";r.d(e,"c",function(){return s}),r.d(e,"b",function(){return i}),r.d(e,"a",function(){return o}),r.d(e,"d",function(){return n});var a=r("b775");function s(t){return Object(a["a"])({url:"admin/categories/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"admin/categories/delete",method:"get",params:{id:t}})}function o(t){return Object(a["a"])({url:"admin/categories/create",method:"post",data:t})}function n(t){return Object(a["a"])({url:"admin/categories/update",method:"post",data:t})}},8691:function(t,e,r){"use strict";r.d(e,"e",function(){return s}),r.d(e,"d",function(){return i}),r.d(e,"c",function(){return o}),r.d(e,"b",function(){return n}),r.d(e,"a",function(){return l}),r.d(e,"f",function(){return c});var a=r("b775");function s(t){return Object(a["a"])({url:"admin/articles/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"admin/articles/getone",method:"get",params:t})}function o(t){return Object(a["a"])({url:"admin/articles/attributes",method:"get",params:t})}function n(t){return Object(a["a"])({url:"admin/articles/delete",method:"post",data:t})}function l(t){return Object(a["a"])({url:"admin/articles/create",method:"post",data:t})}function c(t){return Object(a["a"])({url:"admin/articles/update",method:"post",data:t})}},"95a2":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.postForm,"label-width":"80px"}},[r("el-tabs",[r("el-tab-pane",{attrs:{label:"基本设置"}},[r("el-form-item",{attrs:{label:"所属栏目",prop:"pid"}},[r("el-cascader",{attrs:{options:t.categories,props:t.categoriesProps,clearable:""},model:{value:t.postForm.pid,callback:function(e){t.$set(t.postForm,"pid",e)},expression:"postForm.pid"}})],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"页面标题",prop:"title"}},[r("el-input",{model:{value:t.postForm.title,callback:function(e){t.$set(t.postForm,"title",e)},expression:"postForm.title"}})],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"是否外链"}},[r("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},on:{change:t.linkSwitch},model:{value:t.postForm.is_outside_chain,callback:function(e){t.$set(t.postForm,"is_outside_chain",e)},expression:"postForm.is_outside_chain"}})],1)],1),t._v(" "),1==t.postForm.is_outside_chain?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"外链地址",prop:"outside_chain_url"}},[r("el-input",{model:{value:t.postForm.outside_chain_url,callback:function(e){t.$set(t.postForm,"outside_chain_url",e)},expression:"postForm.outside_chain_url"}})],1)],1):t._e()],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"状态"}},[r("el-radio-group",{model:{value:t.postForm.status,callback:function(e){t.$set(t.postForm,"status",e)},expression:"postForm.status"}},t._l(t.articleStatus,function(e){return r("el-radio",{key:e.id,attrs:{label:e.value}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"排序"}},[r("el-input-number",{attrs:{min:1,max:100},model:{value:t.postForm.sort,callback:function(e){t.$set(t.postForm,"sort",e)},expression:"postForm.sort"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"浏览数"}},[r("el-input-number",{attrs:{min:1,max:100},model:{value:t.postForm.views,callback:function(e){t.$set(t.postForm,"views",e)},expression:"postForm.views"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"发布日期"}},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间","value-format":"timestamp"},model:{value:t.postForm.created_at,callback:function(e){t.$set(t.postForm,"created_at",e)},expression:"postForm.created_at"}})],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"文章属性",prop:"attributes"}},[r("el-checkbox-group",{model:{value:t.postForm.attributes,callback:function(e){t.$set(t.postForm,"attributes",e)},expression:"postForm.attributes"}},t._l(t.articleAttributes,function(e){return r("el-checkbox",{key:e.id,attrs:{name:"attribute",label:e.id,value:e.id}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"标签"}},[r("el-select",{staticStyle:{width:"50%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择文章标签"},model:{value:t.postForm.tags,callback:function(e){t.$set(t.postForm,"tags",e)},expression:"postForm.tags"}},t._l(t.articleTags,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"摘要"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.postForm.description,callback:function(e){t.$set(t.postForm,"description",e)},expression:"postForm.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"缩略图"}},[r("el-upload",{staticClass:"thumb-uploader",attrs:{accept:t.limtFileType,action:"","list-type":"picture","auto-upload":!1,"show-file-list":!1,"on-change":t.imgPreview}},[t.postForm.thumb?r("img",{staticClass:"thumb",attrs:{src:t.postForm.thumb}}):r("i",{staticClass:"el-icon-plus thumb-uploader-icon"}),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])],1),t._v(" "),r("el-form-item",{attrs:{label:"文章组图"}},[r("el-upload",{staticClass:"upload-demo",attrs:{accept:t.limtFileType,action:"#","file-list":t.postForm.pictures,"auto-upload":!1,multiple:"","on-change":t.imgListShow,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"this.GLOBAL.SuccessText"}},[t._v("选择图片")]),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),t._v(" "),r("el-tab-pane",{attrs:{label:"SEO设置"}},[r("el-form-item",{attrs:{label:"SEO标题"}},[r("el-input",{model:{value:t.postForm.seotitle,callback:function(e){t.$set(t.postForm,"seotitle",e)},expression:"postForm.seotitle"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"SEO关键字"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.postForm.seokeywords,callback:function(e){t.$set(t.postForm,"seokeywords",e)},expression:"postForm.seokeywords"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"SEO描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.postForm.seodescription,callback:function(e){t.$set(t.postForm,"seodescription",e)},expression:"postForm.seodescription"}})],1)],1),t._v(" "),r("el-tab-pane",{attrs:{label:"内容设置"}},[r("el-form-item",{staticStyle:{"margin-bottom":"30px"},attrs:{label:"内容",prop:"content"}},[r("Tinymce",{ref:"editor",attrs:{height:400},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}})],1)],1)],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),r("el-button",[t._v("取消")])],1)],1)],1)},s=[],i=(r("7f7f"),r("ac6a"),r("456d"),r("66da")),o=r("8691"),n=r("8256"),l={id:void 0,pid:[],title:"",content:"",description:"",sort:"",views:"",thumb:"",pictures:[],status:1,seotitle:"",seokeywords:"",seodescription:"",tags:[],attributes:[],is_outside_chain:!1,outside_chain_url:"",created_at:""},c={name:"ArticleForm",components:{Tinymce:n["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{limtFileType:"image/jpeg,image/gif,image/png,image/bmp",articleStatus:[],articleTags:[],articleAttributes:[],fileSizeLimit:512e3,categories:[],categoriesProps:{value:"id",label:"name",children:"children",checkStrictly:!0},postForm:Object.assign({},l),rules:{pid:[{required:!0,message:"必须选择文章栏目",trigger:"blur"}],title:[{required:!0,message:"文章标题必须填写",trigger:"blur"}],outside_chain_url:[{type:"url",required:!0,message:"外链地址必须填写",trigger:"blur"}],content:[{required:!0,message:"文章内容必须填写",trigger:"blur"}],attributes:[{type:"array",required:!0,message:"请至少选择一个文章属性",trigger:"change"}]}}},created:function(){this.init()},methods:{init:function(){var t=this;if(this.handerQuery(),this.isEdit){var e=this.$route.params&&this.$route.params.id;this.fetchArticleData(e)}this.postForm.created_at=Date.parse(new Date),Object(i["c"])().then(function(e){t.categories=e.data.items}),Object(o["c"])().then(function(e){t.articleTags=e.data.tags,t.articleAttributes=e.data.attributes,t.articleStatus=e.data.status})},handerQuery:function(){this.postForm.pid=[],Object.keys(this.$route.query).length>0&&"undefined"!=typeof this.$route.query.cid&&parseInt(this.$route.query.cid)>0&&this.postForm.pid.push(parseInt(this.$route.query.cid))},fetchArticleData:function(t){var e=this;Object(o["d"])({id:t}).then(function(t){t.data.status==e.GLOBAL.SuccessText?e.postForm=t.data.data:console.log("get article error")})},onSubmit:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&(t.isEdit?Object(o["f"])(t.postForm).then(function(e){e.data.status==t.GLOBAL.SuccessText?(t.$notify({title:"成功",message:e.data.msg,type:"success",duration:2e3}),t.$router.push({path:"/article/list",params:{pid:e.data.pid}})):t.$message.error(e.data.msg)}):Object(o["a"])(t.postForm).then(function(e){e.data.status==t.GLOBAL.SuccessText?(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$router.push({path:"/article/list",query:{pid:e.data.pid}})):t.$message.error(e.data.msg)}))})},imgCheck:function(t,e){var r=t.name,a=/(.jpg|.jpeg|.gif|.png|.bmp)$/;return a.test(r.toLowerCase())?!(t.size>this.fileSizeLimit)||(this.$message.error("选择的图片大小不能超过500KB"),!1):(this.$message.error("请选择图片文件"),!1)},imgListShow:function(t,e){this.imgCheck(t,e)||e.pop()},imgPreview:function(t,e){this.imgCheck(t,e)&&(this.postForm.thumb=t.url)},linkSwitch:function(t){t&&""==this.postForm.content&&(this.postForm.content="default content")}}},u=c,p=(r("0c6f"),r("2877")),m=Object(p["a"])(u,a,s,!1,null,null,null);e["a"]=m.exports},aa77:function(t,e,r){var a=r("5ca1"),s=r("be13"),i=r("79e5"),o=r("fdef"),n="["+o+"]",l="​",c=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),p=function(t,e,r){var s={},n=i(function(){return!!o[t]()||l[t]()!=l}),c=s[t]=n?e(m):o[t];r&&(s[r]=c),a(a.P+a.F*n,"String",s)},m=p.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},c5f6:function(t,e,r){"use strict";var a=r("7726"),s=r("69a8"),i=r("2d95"),o=r("5dbc"),n=r("6a99"),l=r("79e5"),c=r("9093").f,u=r("11e9").f,p=r("86cc").f,m=r("aa77").trim,d="Number",f=a[d],b=f,h=f.prototype,g=i(r("2aeb")(h))==d,v="trim"in String.prototype,_=function(t){var e=n(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():m(e,3);var r,a,s,i=e.charCodeAt(0);if(43===i||45===i){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,s=49;break;case 79:case 111:a=8,s=55;break;default:return+e}for(var o,l=e.slice(2),c=0,u=l.length;c<u;c++)if(o=l.charCodeAt(c),o<48||o>s)return NaN;return parseInt(l,a)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof f&&(g?l(function(){h.valueOf.call(r)}):i(r)!=d)?o(new b(_(e)),r,f):_(e)};for(var F,y=r("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;y.length>k;k++)s(b,F=y[k])&&!s(f,F)&&p(f,F,u(b,F));f.prototype=h,h.constructor=f,r("2aba")(a,d,f)}},fbee:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("article-form",{attrs:{"is-edit":!0}})},s=[],i=r("95a2"),o={name:"EditArticle",components:{ArticleForm:i["a"]}},n=o,l=r("2877"),c=Object(l["a"])(n,a,s,!1,null,null,null);e["default"]=c.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);